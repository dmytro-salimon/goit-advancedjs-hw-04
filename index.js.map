{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchImagesByQuery = (searchedQuery, page) => {\n  const requestParams = {\n    key: '48288540-d41f150545e6f7b8d91ef3882',\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    page: page,\n    per_page: 15,\n  };\n  \n  return axios.get('/', { params: requestParams });\n};\n","export const createGalleryCardTemplate = imgArr => {\n  return imgArr.reduce((acc, el) => {\n    return (\n      acc +\n      `\n      <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"gallery-info\">\n          <div class=\"info-block\">\n            <p class=\"info-block-title\">Likes:</p>\n            <p class=\"info-block-value\">${el.likes}</p>\n          </div>\n          <div class=\"info-block\">\n            <p class=\"info-block-title\">Views:</p>\n            <p class=\"info-block-value\">${el.views}</p>\n          </div>\n          <div class=\"info-block\">\n            <p class=\"info-block-title\">Comments:</p>\n            <p class=\"info-block-value\">${el.comments}</p>\n          </div>\n          <div class=\"info-block\">\n            <p class=\"info-block-title\">Downloads:</p>\n            <p class=\"info-block-value\">${el.downloads}</p>\n          </div>\n        </div>\n      </li>\n      `\n    );\n  }, '');\n};\n\n","import { fetchImagesByQuery } from './js/pixabay-api';\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.load-more');\nconst endMessageEl = document.querySelector('.end-message');\n\nconst simpleLightbox = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nlet inputValue = '';\nlet cardHeight = 0;\nconst perPage = 15;\n\nconst onSearchFormSubmit = async event => {\n\ttry {\n\t\tevent.preventDefault();\n\n\t\tinputValue = event.currentTarget.elements.query.value.trim();\n\n\t\tif (inputValue === '') {\n\t\t\tiziToast.warning({\n\t\t\t\ttitle: 'Warning',\n\t\t\t\tmessage: 'The search field cannot be empty.',\n\t\t\t\tposition: 'topRight',\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tpage = 1;\n\n\t\tloadMoreBtnEl.classList.add('is-hidden');\n\n\t\tendMessageEl.classList.add('is-hidden');\n\t\t\n\t\tgalleryEl.innerHTML = '';\n\n\t\tloaderEl.classList.remove('is-hidden');\n\n\t\tconst response = await fetchImagesByQuery(inputValue, page);\n\n\t\tif (response.data.total === 0) {\n\t\t\tiziToast.error({\n\t\t\t\ttitle: 'Error',\n\t\t\t\tmessage:\n\t\t\t\t\t'Sorry, there are no images matching your search query. Please try again!',\n\t\t\t\tposition: 'topRight',\n\t\t\t});\n\n\t\t\tgalleryEl.innerHTML = '';\n\n\t\t\tsearchFormEl.reset();\n\n\t\t\tloaderEl.classList.add('is-hidden');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.data.totalHits > perPage) {\n\t\t\tloadMoreBtnEl.classList.remove('is-hidden');\n\n\t\t\tloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n\t\t} else {\n\t\t\tendMessageEl.classList.remove('is-hidden');\n\t\t}\n\t\t\n\t\tloaderEl.classList.add('is-hidden');\n\n\t\tgalleryEl.innerHTML = createGalleryCardTemplate(response.data.hits);\n\t\t\n\t\tsimpleLightbox.refresh();\n\t\t\n\t\tcardHeight = galleryEl.querySelector('li').getBoundingClientRect().height;\n\n\t} catch (err) {\n\t\tconsole.log(err);\n\t}\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n\ttry {\n\t\tpage++;\n\n\t\tloadMoreBtnEl.classList.add('is-hidden');\n\t\tloaderEl.classList.remove('is-hidden');\n\n\t\tconst response = await fetchImagesByQuery(inputValue, page);\n\n\t\tgalleryEl.insertAdjacentHTML('beforeend', createGalleryCardTemplate(response.data.hits));\n\n\t\tscrollBy({\n\t\t\ttop: cardHeight * 2,\n\t\t\tbehavior: 'smooth',\n\t\t})\n\n\t\tsimpleLightbox.refresh();\n\n\t\tif (page * perPage >= response.data.totalHits) {\n\t\t\tloadMoreBtnEl.classList.add('is-hidden');\n\n\t\t\tendMessageEl.classList.remove('is-hidden');\n\n\t\t\tloadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n\t\t} else {\n\t\t\tloadMoreBtnEl.classList.remove('is-hidden');\n\t\t}\n\n\t\tloaderEl.classList.add('is-hidden');\n\t} catch (err) {\n\t\tconsole.log(err);\n\t}\n}\n"],"names":["axios","fetchImagesByQuery","searchedQuery","page","requestParams","createGalleryCardTemplate","imgArr","acc","el","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","endMessageEl","simpleLightbox","SimpleLightbox","inputValue","cardHeight","perPage","onSearchFormSubmit","event","iziToast","response","onLoadMoreBtnClick","err"],"mappings":"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"}